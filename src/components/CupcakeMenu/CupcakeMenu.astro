---
import "./CupcakeMenu.less";
import "./CupcakeItem.less";
import { cupcakeMenu } from "../../assets/data/cupcakeMenu";
const images = await Astro.glob("../../assets/images/cupcakes/*").then(
	(files) => {
		return files.map((file) => file.default);
	}
);

const getDataFromImage = (img) => {
	let res = null;
	cupcakeMenu.map((cupcake) => {
		if (img.includes(cupcake.imgUrl)) {
			res = cupcake;
		}
	});
	return res;
};
---

<section id="cupcakes-all">
	<div class="cs-container">
		<div class="cs-gallery">
			{
				images.map((image) => (
					<article class="cupcake-item">
						<picture class="cs-image">
							<source media="(max-width: 600px)" srcset={image} />
							<source media="(min-width: 601px)" srcset={image} />
							<img
								loading="lazy"
								decoding="async"
								src={image}
								alt="logo"
								width="600"
								height="600"
							/>
						</picture>
						<p class="cupcake-item-title">
							{getDataFromImage(image).name}
						</p>
						<p class="cupcake-item-price">
							{getDataFromImage(image).price}
						</p>
						<p class="cupcake-item-description">
							{getDataFromImage(image).description}
						</p>
						{getDataFromImage(image).additionalDesc && (
							<p class="cupcake-item-additionalDesc">
								{getDataFromImage(image).additionalDesc}
							</p>
						)}
					</article>
				))
			}
		</div>
	</div>
</section>
